using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class InvulnerabilityFrames : MonoBehaviour {
    [Header ("References")]

    [SerializeField] private Collider2D col;
    [SerializeField] private SpriteRenderer sr;
    [SerializeField] private PlayerHealth movement;

    [Header ("Behavior Settings")]
    [SerializeField] private float flashAlpha;
    [SerializeField] private float flashDuration;
    [SerializeField] private int numOfFlash;

    public void Flash () {
        StartCoroutine (FlashCoroutine ());
    }

    // IFrame flashing
    private IEnumerator FlashCoroutine () {
        int flashCounter = 0;
        movement.isInvulnerable = true;
        while (flashCounter < numOfFlash) {
            sr.color = new Color (1.0f, 1.0f, 1.0f, flashAlpha);
            yield return new WaitForSeconds (flashDuration);
            sr.color = new Color (1.0f, 1.0f, 1.0f, 1.0f);
            yield return new WaitForSeconds (flashDuration);
            flashCounter++;
        }
        movement.isInvulnerable = false;
    }

}